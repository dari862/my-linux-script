sudo apt update
sudo apt upgrade -y
sudo apt install -y git

#sudo apt install awesome fonts-roboto rofi compton i3lock xclip qt5-style-plugins materia-gtk-theme lxappearance xbacklight flameshot nautilus xfce4-power-manager pnmixer network-manager-gnome policykit-1-gnome nitrogen -y
#wget -qO- https://git.io/papirus-icon-theme-install | sh


#-- Autostart Applications
#awful.spawn.with_shell("nitrogen --restore")
#awful.spawn.with_shell("picom")
#awful.spawn.with_shell("nm-applet --indicator")
#awful.spawn.with_shell("pnmixer")
#awful.spawn.with_shell("numlockx on")
#awful.spawn.with_shell("/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 & eval $(gnome-keyring-daemon -s --components=pkcs11,secrets,ssh,gpg)")
#awful.spawn.with_shell("xfce4-power-manager")

#################################################################

sudo apt install materia-gtk-theme lxappearance

mkdir -p ~/.config/awesome
mkdir -p ~/.config/awesome/themes
sudo apt install awesome awesome-extra
sudo apt install xfce4-taskmanager xfce4-power-manager xfce4-settings scrot pcmanfm kitty nitrogen picom geany file-roller dmenu
cp /etc/xdg/awesome/rc.lua ~/.config/awesome
cp /usr/share/awesome/themes/gtk/theme.lua ~/.config/awesome/themes/gtk.lua
sed -i 's/theme.useless_gap   = dpi(3)/theme.useless_gap   = dpi(5)/g' ~/.config/awesome/themes/gtk.lua

sed -i 's/terminal = "x-terminal-emulator"/local terminal = "x-terminal-emulator"/g' ~/.config/awesome/rc.lua
sed -i 's/editor = os.getenv/local editor = os.getenv/g' ~/.config/awesome/rc.lua
sed -i 's/editor_cmd = /local editor_cmd = /g' ~/.config/awesome/rc.lua

sed -i '/^-- {{{ Variable definitions/a -- Var for Applications' ~/.config/awesome/rc.lua
sed -i '/^-- Var for Applications/a local filesmanagerr = "pcmanfm"' ~/.config/awesome/rc.lua
sed -i '/^-- Var for Applications/a local screenshot = "flameshot"' ~/.config/awesome/rc.lua
sed -i '/^-- Var for Applications/a local browser = "firefox"' ~/.config/awesome/rc.lua

sed -i 's/modkey = /local modkey = /g' ~/.config/awesome/rc.lua
sed -i 's/"Mod4"/"Mod1"/g' ~/.config/awesome/rc.lua
sed -i 's/properties = { titlebars_enabled = true }/properties = { titlebars_enabled = false }/g' ~/.config/awesome/rc.lua

sed -i 's/awful.screen.focused().mypromptbox:run()/awful.util.spawn("dmenu_run")/g' ~/.config/awesome/rc.lua

# work on awful.layout.layouts
# add https://github.com/Elv13/collision

sed -i 's/awful.tag({ "1", "2", "3", "4", "5", "6", "7", "8", "9" }/awful.tag({ "1", "2", "3", "4", "5", "6", "7", "8", "9" }/g' ~/.config/awesome/rc.lua

cat << EOF > ffffffff.txt
    awful.key({ modkey }, "b", function () awful.spawn(browser) end,
              {description = "run browser", group = "launcher"}),

    -- User File manager
    awful.key({ modkey }, "b", function () awful.spawn(filesmanagerr) end,
              {description = "launch File manager", group = "launcher"}),
			  
    -- Dmenu  
EOF
sed -i '/-- Prompt/ r ffffffff.txt' ~/.config/awesome/rc.lua	  
sed -i 's/-- Prompt/-- User browser/g' ~/.config/awesome/rc.lua
rm ffffffff.txt

sed -i '/^-- {{{ Variable definitions/a local sloppy_focuss_enabled = false' ~/.config/awesome/rc.lua
sed -i '/^-- Enable sloppy focus/{N;N;N;s/$/\nend/}' ~/.config/awesome/rc.lua
sed -i '/^-- Enable sloppy focus/a then' ~/.config/awesome/rc.lua
sed -i '/^-- Enable sloppy focus/a if sloppy_focuss_enabled' ~/.config/awesome/rc.lua

sed -i '/^-- Themes define colours/a local my_theme = "gtk"' ~/.config/awesome/rc.lua
sed -i 's|gears.filesystem.get_themes_dir() .. "default/theme.lua"|string.format("%s/.config/awesome/themes/%s.lua", os.getenv("HOME"), my_theme)|g' ~/.config/awesome/rc.lua

cat << EOF >> ~/.config/awesome/rc.lua
 
-- Autostart Applications
awful.spawn.with_shell("picom")
awful.spawn.with_shell("nitrogen --restore")
awful.spawn.with_shell(screenshot)

EOF

mkdir -p ~/.config/nitrogen
cat << eof > ~/.config/nitrogen/bg-saved.cfg
[xin_-1]
file=/home/$USER/.local/share/wallpapers/nord1.png
mode=5
bgcolor=#000000
eof

mkdir -p ~/.local/share/wallpapers
wget -P ~/.local/share/wallpapers https://raw.githubusercontent.com/dari862/my-linux-script/main/wallpaper/nord1.png

diff /etc/xdg/awesome/rc.lua ~/.config/awesome
